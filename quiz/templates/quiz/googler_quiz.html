<!DOCTYPE html>
<html>
<head>
<title>Googler Round | Digital Treasure Hunt</title>

<style>
body{margin:0;font-family:Segoe UI;background:radial-gradient(circle,#2b1b0f,#0f0a06);color:#f5e6b3;}
.header{background:linear-gradient(90deg,#8b5a2b,#c9a24d);color:#2b1b0f;padding:15px;text-align:center;font-size:26px;font-weight:bold;}
.box{max-width:900px;margin:30px auto;padding:20px;background:rgba(0,0,0,0.6);border-radius:12px;border:1px solid #c9a24d;}
.btn{padding:12px 30px;font-size:18px;border:none;border-radius:30px;background:linear-gradient(90deg,#c9a24d,#ffd700);cursor:pointer;font-weight:bold;}
.timer{text-align:center;color:#ffd700;font-size:20px;margin-top:10px;}
.question{display:none;}
.nav-btns{text-align:center;margin-top:20px;}
img{border-radius:6px;border:1px solid gold;margin:8px 0;}
</style>
</head>

<body>

<div class="header">üîç Googler Round ‚Äî Digital Treasure Hunt</div>
<div class="timer">‚è± Time Left: <span id="timer">{{ remaining }}</span> sec</div>

<form method="post" id="quizForm">
{% csrf_token %}

<!-- INSTRUCTIONS -->
<div class="box" id="instructionBox">
<h2>üìú Instructions</h2>
<ul>
<li>You may use Google.</li>
<li>Do not refresh the page.</li>
<li>Auto submit when time ends.</li>
</ul>
<br>
<button type="button" class="btn" onclick="showName()">I Understand, Proceed</button>
</div>

<!-- NAME -->
<div class="box" id="nameBox" style="display:none;">
<h2>üßë Enter Your Full Name</h2>
<input type="text" name="name" required style="width:100%;padding:10px;border-radius:8px;">
<br><br>
<button type="button" class="btn" onclick="startQuiz()">Start Round</button>
</div>

<!-- QUIZ -->
<div id="quizBox" style="display:none;">

{% for q in questions %}
<div class="box question">

<b>{{ forloop.counter }}. {{ q.text }}</b><br>

{% if q.question_image %}
<img src="{{ q.question_image.url }}" width="300"><br>
{% endif %}

{% if q.question_type == "MCQ" %}

<label><input type="radio" name="{{ q.id }}" value="1"> {{ q.option1 }}
{% if q.option1_image %}<br><img src="{{ q.option1_image.url }}" width="120">{% endif %}</label><br>

<label><input type="radio" name="{{ q.id }}" value="2"> {{ q.option2 }}
{% if q.option2_image %}<br><img src="{{ q.option2_image.url }}" width="120">{% endif %}</label><br>

<label><input type="radio" name="{{ q.id }}" value="3"> {{ q.option3 }}
{% if q.option3_image %}<br><img src="{{ q.option3_image.url }}" width="120">{% endif %}</label><br>

<label><input type="radio" name="{{ q.id }}" value="4"> {{ q.option4 }}
{% if q.option4_image %}<br><img src="{{ q.option4_image.url }}" width="120">{% endif %}</label>

{% else %}
<input type="text" name="{{ q.id }}" placeholder="Type answer here..." style="width:100%;padding:10px;border-radius:6px;">
{% endif %}

</div>
{% endfor %}

<div class="nav-btns">
<button type="button" class="btn" onclick="prevQ()">‚¨Ö Previous</button>
<button type="button" class="btn" onclick="nextQ()">Next ‚û°</button>
<button type="submit" class="btn" id="submitBtn" style="display:none;">üèÅ Submit</button>
</div>

</div>
</form>

<script>
let qIndex=0;
let questions=document.getElementsByClassName("question");

function showName(){
 document.getElementById("instructionBox").style.display="none";
 document.getElementById("nameBox").style.display="block";
}

function startQuiz(){
 document.getElementById("nameBox").style.display="none";
 document.getElementById("quizBox").style.display="block";
 showQuestion();
}

function showQuestion(){
 for(let i=0;i<questions.length;i++)questions[i].style.display="none";
 questions[qIndex].style.display="block";
 document.getElementById("submitBtn").style.display =
 (qIndex==questions.length-1)?"inline-block":"none";
}

function nextQ(){ if(qIndex<questions.length-1){ qIndex++; showQuestion(); } }
function prevQ(){ if(qIndex>0){ qIndex--; showQuestion(); } }

let time={{ remaining }};
let timer=document.getElementById("timer");
let form=document.getElementById("quizForm");

setInterval(function(){
 if(time>0){ time--; timer.innerText=time; }
 else{ form.submit(); }
},1000);
</script>

</body>
</html>
